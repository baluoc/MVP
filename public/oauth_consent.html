<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Jules MCP - Zugriff gewähren</title>
    <style>
        body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background: #222; color: #eee; }
        .card { background: #333; padding: 2rem; border-radius: 8px; width: 400px; box-shadow: 0 4px 10px rgba(0,0,0,0.5); }
        h1 { margin-top: 0; color: #00ff88; }
        .info { margin: 1rem 0; font-size: 0.9rem; line-height: 1.4; }
        .actions { display: flex; gap: 1rem; margin-top: 2rem; }
        button { flex: 1; padding: 0.8rem; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; }
        .approve { background: #00ff88; color: #111; }
        .deny { background: #ff4444; color: white; }
    </style>
</head>
<body>
    <div class="card">
        <h1>Jules MCP Zugriff</h1>
        <div class="info">
            Eine externe Anwendung möchte Zugriff auf den MCP-Server (Development Interface).
            <br><br>
            <strong>Berechtigungen:</strong>
            <ul>
                <li>DIV-Pakete analysieren</li>
                <li>Änderungen vorschlagen (DIV)</li>
            </ul>
        </div>
        <form method="POST" action="/authorize" id="authForm">
            <!-- Inputs injected via JS or assumed present in session? -->
            <!-- We need to preserve the query params from the GET request -->
            <input type="hidden" name="client_id" id="client_id">
            <input type="hidden" name="redirect_uri" id="redirect_uri">
            <input type="hidden" name="state" id="state">
            <input type="hidden" name="code_challenge" id="code_challenge">

            <div class="actions">
                <button type="submit" name="action" value="deny" class="deny">Ablehnen</button>
                <button type="submit" name="action" value="approve" class="approve">Erlauben</button>
            </div>
        </form>
    </div>
    <script>
        // Populate hidden fields from URL params
        const params = new URLSearchParams(window.location.search);
        document.getElementById('client_id').value = params.get('client_id');
        document.getElementById('redirect_uri').value = params.get('redirect_uri');
        document.getElementById('state').value = params.get('state');
        document.getElementById('code_challenge').value = params.get('code_challenge');
    </script>
</body>
</html>
